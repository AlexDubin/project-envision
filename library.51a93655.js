!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire34ff;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire34ff=i),i("i8Q71");"use strict";var s={};s=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}');var o={};Object.defineProperty(o,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}return n}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")};o.default=function(e,t){var n=[],a=[];return function(){if(e&&e instanceof HTMLElement&&"SELECT"===e.tagName.toUpperCase())n.push(e);else if(e&&"string"==typeof e)for(var i=document.querySelectorAll(e),s=0,o=i.length;s<o;++s)i[s]instanceof HTMLElement&&"SELECT"===i[s].tagName.toUpperCase()&&n.push(i[s]);else if(e&&e.length)for(var c=0,d=e.length;c<d;++c)e[c]instanceof HTMLElement&&"SELECT"===e[c].tagName.toUpperCase()&&n.push(e[c]);for(var p=0,m=n.length;p<m;++p)a.push(function(e,t){var n="customSelect",a=!1,i="",s=void 0,o=void 0,r=void 0,c=void 0,d=void 0,u=void 0,p=void 0,m="";function v(e){r&&r.classList.remove(t.hasFocusClass),void 0!==e?((r=e).classList.add(t.hasFocusClass),a&&(e.offsetTop<e.offsetParent.scrollTop||e.offsetTop>e.offsetParent.scrollTop+e.offsetParent.clientHeight-e.clientHeight)&&e.dispatchEvent(new CustomEvent("custom-select:focus-outside-panel",{bubbles:!0}))):r=void 0}function f(e){c&&(c.classList.remove(t.isSelectedClass),c.removeAttribute("id"),o.removeAttribute("aria-activedescendant")),void 0!==e?(e.classList.add(t.isSelectedClass),e.setAttribute("id",n+"-"+i+"-selectedOption"),o.setAttribute("aria-activedescendant",n+"-"+i+"-selectedOption"),c=e,o.children[0].textContent=c.customSelectOriginalOption.text):(c=void 0,o.children[0].textContent=""),v(e)}function g(t){var n=[].indexOf.call(e.options,r.customSelectOriginalOption);e.options[n+t]&&v(e.options[n+t].customSelectCstOption)}function h(e){if(e||void 0===e){var i=document.querySelector("."+n+"."+t.isOpenClass);i&&(i.customSelect.open=!1),s.classList.add(t.isOpenClass),s.classList.add(t.isOpenClass),o.setAttribute("aria-expanded","true"),c&&(d.scrollTop=c.offsetTop),s.dispatchEvent(new CustomEvent("custom-select:open")),a=!0}else s.classList.remove(t.isOpenClass),o.setAttribute("aria-expanded","false"),a=!1,v(c),s.dispatchEvent(new CustomEvent("custom-select:close"));return a}function C(n){n.target===o||o.contains(n.target)?a?h(!1):h():n.target.classList&&n.target.classList.contains(t.optionClass)&&d.contains(n.target)?(f(n.target),c.customSelectOriginalOption.selected=!0,h(!1),e.dispatchEvent(new CustomEvent("change"))):n.target===e?o!==document.activeElement&&e!==document.activeElement&&o.focus():a&&!s.contains(n.target)&&h(!1)}function b(e){e.target.classList&&e.target.classList.contains(t.optionClass)&&v(e.target)}function E(t){if(a)switch(t.keyCode){case 13:case 32:f(r),c.customSelectOriginalOption.selected=!0,e.dispatchEvent(new CustomEvent("change")),h(!1);break;case 27:h(!1);break;case 38:g(-1);break;case 40:g(1);break;default:if(t.keyCode>=48&&t.keyCode<=90){p&&clearTimeout(p),p=setTimeout(function(){m=""},1500),m+=String.fromCharCode(t.keyCode);for(var n=0,i=e.options.length;n<i;n++)if(e.options[n].text.toUpperCase().substr(0,m.length)===m){v(e.options[n].customSelectCstOption);break}}}else(40===t.keyCode||38===t.keyCode||32===t.keyCode)&&h()}function y(){var t=e.selectedIndex;f(-1===t?void 0:e.options[t].customSelectCstOption)}function O(e){var t=e.currentTarget,n=e.target;n.offsetTop<t.scrollTop?t.scrollTop=n.offsetTop:t.scrollTop=n.offsetTop+n.clientHeight-t.clientHeight}function L(){document.addEventListener("click",C),d.addEventListener("mouseover",b),d.addEventListener("custom-select:focus-outside-panel",O),e.addEventListener("change",y),s.addEventListener("keydown",E)}function T(){document.removeEventListener("click",C),d.removeEventListener("mouseover",b),d.removeEventListener("custom-select:focus-outside-panel",O),e.removeEventListener("change",y),s.removeEventListener("keydown",E)}function S(e){var n=[];if(void 0===e.length)throw TypeError("Invalid Argument");for(var a=0,i=e.length;a<i;a++)if(e[a]instanceof HTMLElement&&"OPTGROUP"===e[a].tagName.toUpperCase()){var s=document.createElement("div");s.classList.add(t.optgroupClass),s.setAttribute("data-label",e[a].label),s.customSelectOriginalOptgroup=e[a],e[a].customSelectCstOptgroup=s;for(var o=S(e[a].children),r=0,l=o.length;r<l;r++)s.appendChild(o[r]);n.push(s)}else if(e[a]instanceof HTMLElement&&"OPTION"===e[a].tagName.toUpperCase()){var c=document.createElement("div");c.classList.add(t.optionClass),c.textContent=e[a].text,c.setAttribute("data-value",e[a].value),c.setAttribute("role","option"),c.customSelectOriginalOption=e[a],e[a].customSelectCstOption=c,e[a].selected&&f(c),n.push(c)}else throw TypeError("Invalid Argument");return n}function w(t,n,a){var i=void 0;if(void 0===a||a===e)i=d;else if(a instanceof HTMLElement&&"OPTGROUP"===a.tagName.toUpperCase()&&e.contains(a))i=a.customSelectCstOptgroup;else throw TypeError("Invalid Argument");var s=t instanceof HTMLElement?[t]:t;if(n)for(var o=0,r=s.length;o<r;o++)i===d?e.appendChild(s[o]):i.customSelectOriginalOptgroup.appendChild(s[o]);for(var l=S(s),c=0,u=l.length;c<u;c++)i.appendChild(l[c]);return s}(s=document.createElement("div")).classList.add(t.containerClass,n),(o=document.createElement("span")).className=t.openerClass,o.setAttribute("role","combobox"),o.setAttribute("aria-autocomplete","list"),o.setAttribute("aria-expanded","false"),o.innerHTML="<span>\n   "+(-1!==e.selectedIndex?e.options[e.selectedIndex].text:"")+"\n   </span>",d=document.createElement("div");for(var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=0;A<5;A++)i+=N.charAt(Math.floor(Math.random()*N.length));return d.id=n+"-"+i+"-panel",d.className=t.panelClass,d.setAttribute("role","listbox"),o.setAttribute("aria-owns",d.id),w(e.children,!1),s.appendChild(o),e.parentNode.replaceChild(s,e),s.appendChild(e),s.appendChild(d),document.querySelector('label[for="'+e.id+'"]')?u=document.querySelector('label[for="'+e.id+'"]'):"LABEL"===s.parentNode.tagName.toUpperCase()&&(u=s.parentNode),void 0!==u&&(u.setAttribute("id",n+"-"+i+"-label"),o.setAttribute("aria-labelledby",n+"-"+i+"-label")),e.disabled?s.classList.add(t.isDisabledClass):(o.setAttribute("tabindex","0"),e.setAttribute("tabindex","-1"),L()),s.customSelect={get pluginOptions(){return t},get open(){return a},set open(bool){h(bool)},get disabled(){return e.disabled},set disabled(bool){bool&&!e.disabled?(s.classList.add(t.isDisabledClass),e.disabled=!0,o.removeAttribute("tabindex"),s.dispatchEvent(new CustomEvent("custom-select:disabled")),T()):!bool&&e.disabled&&(s.classList.remove(t.isDisabledClass),e.disabled=!1,o.setAttribute("tabindex","0"),s.dispatchEvent(new CustomEvent("custom-select:enabled")),L())},get value(){return e.value},set value(val){var I;(I=e.querySelector("option[value='"+val+"']"))||(I=l(e.options,1)[0]),I.selected=!0,f(e.options[e.selectedIndex].customSelectCstOption)},append:function(e,t){return w(e,!0,t)},insertBefore:function(t,n){return function(t,n){var a=void 0;if(n instanceof HTMLElement&&"OPTION"===n.tagName.toUpperCase()&&e.contains(n))a=n.customSelectCstOption;else if(n instanceof HTMLElement&&"OPTGROUP"===n.tagName.toUpperCase()&&e.contains(n))a=n.customSelectCstOptgroup;else throw TypeError("Invalid Argument");var i=S(t.length?t:[t]);return a.parentNode.insertBefore(i[0],a),n.parentNode.insertBefore(t.length?t[0]:t,n)}(t,n)},remove:function(t){var n=void 0;if(t instanceof HTMLElement&&"OPTION"===t.tagName.toUpperCase()&&e.contains(t))n=t.customSelectCstOption;else if(t instanceof HTMLElement&&"OPTGROUP"===t.tagName.toUpperCase()&&e.contains(t))n=t.customSelectCstOptgroup;else throw TypeError("Invalid Argument");n.parentNode.removeChild(n);var a=t.parentNode.removeChild(t);return y(),a},empty:function(){for(var t=[];e.children.length;)d.removeChild(d.children[0]),t.push(e.removeChild(e.children[0]));return f(),t},destroy:function(){for(var t=0,n=e.options.length;t<n;t++)delete e.options[t].customSelectCstOption;for(var a=e.getElementsByTagName("optgroup"),i=0,o=a.length;i<o;i++)delete a.customSelectCstOptgroup;return T(),s.parentNode.replaceChild(e,s)},opener:o,select:e,panel:d,container:s},e.customSelect=s.customSelect,s.customSelect}(n[p],r({},u,t)));return a}()};try{var c=new window.CustomEvent("test");if(c.preventDefault(),!0!==c.defaultPrevented)throw Error("Could not prevent default")}catch(e){var d=function(e,t){var n,a;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a=n.preventDefault,n.preventDefault=function(){a.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};d.prototype=window.Event.prototype,window.CustomEvent=d}var u={containerClass:"custom-select-container",openerClass:"custom-select-opener",panelClass:"custom-select-panel",optionClass:"custom-select-option",optgroupClass:"custom-select-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"},p=({poster_path:t,title:n,vote_average:a,genre_ids:i,release_date:o,id:r})=>{let l={},c="";return e(s).genres.forEach(e=>{l[e.id]=e.name}),i.length>0&&(c=1===i.length||i.join(", ").length<=20?l[i[0]]:`${l[i[0]]}, ${l[i[1]]}`),`<li class='item-movie-card' data-genres='${i}' data-id='${r}'>
  <img class='poster-movie-card' src='https://image.tmdb.org/t/p/original${t}' alt='${n}'>
  <div class='overlay-movie-card'></div>
  <div class='info-movie-card'>
    <h4 class='title-movie-card'>${n}</h4>
    <div class='wrapper-movie-card'>
      <div class='genre-year-movie-card'>
        <p class='genre-movie-card span'>${c}</p>
        <span class='divider-movie-card'>&#124</span>
        <p class='year-movie-card span'>${o.slice(0,4)}</p>
      </div>
        <div class="rating">
          <div class="rating-body">
            <div class="rating-active"></div>
            <div class="rating-items">
              <input type="radio" class="rating-item" value="1" name="rating" />
              <input type="radio" class="rating-item" value="2" name="rating" />
              <input type="radio" class="rating-item" value="3" name="rating" />
              <input type="radio" class="rating-item" value="4" name="rating" />
              <input type="radio" class="rating-item" value="5" name="rating" />
            </div>
          </div>
        <div class="rating-value">${a}</div>
    </div>
  </div>
</li>`},m=i("6JpON");function v(e=-1){let t=JSON.parse(localStorage.getItem("movies-library")??"[]");return e>0?t.slice(0,e):t}var f=i("dIxxU");let g={headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwYjE3NzU3ZjU2ZDg1NmM5YzE2MmE1OWEzZWZlMmY5MyIsInN1YiI6IjY0NzhkNWZjOWI2ZTQ3MDBkZThlOTBlZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BE22YVTai34Dh5C1jSxEZ2DzzjnxJfKFgEIpWS2JFcI",accept:"application/json"}},h=document.getElementById("genres-select"),C=document.getElementById("library-movie-list"),b=document.getElementById("lib-empty"),E=document.getElementById("lib-catalog"),y=document.getElementById("lib-load-more"),O=1;function L(e){C.insertAdjacentHTML("beforeend",e.map(p).join("")),function(){let e=document.querySelectorAll(".rating");e.forEach(e=>{!function(e){var t;let n=e.querySelector(".rating-active"),a=e.querySelector(".rating-value");a&&(t=a.innerHTML,n.style.width=`${t/10*100}%`)}(e)})}()}function T(e){let t=C.childNodes,n=e.target.value;"-1"===n?t.forEach(e=>e.classList.remove("is-hidden")):t.forEach(e=>{e.dataset.genres.split(",").includes(n)?e.classList.remove("is-hidden"):e.classList.add("is-hidden")})}async function S(){try{let e=v();if(0===e.length){b.classList.remove("is-hidden"),E.classList.add("is-hidden");return}let t=[];e.length<=9?(y.classList.add("is-hidden"),t=await Promise.all(e.map(w))):t=await Promise.all(e.slice(0,9).map(w)),L(t)}catch(e){A(e)}}async function w({id:e}){let t=await (0,f.default).get(`https://api.themoviedb.org/3/movie/${e}?language=en-US`,g),{data:{poster_path:n,title:a,vote_average:i,release_date:s,genres:o}}=t,r=o.map(({id:e})=>e);return{genre_ids:r,poster_path:n,title:a,vote_average:i,release_date:s,id:e}}async function N(){try{let e=v(),t=[],n=9*O;e.length-n<=9?(y.classList.add("is-hidden"),t=await Promise.all(e.slice(n).map(w))):(t=await Promise.all(e.slice(n,n+9).map(w)),O+=1),L(t)}catch(e){A(e)}}function A(e){console.error(e),(0,m.Notify).failure(e.message)}window.addEventListener("DOMContentLoaded",function(){(function(e){e.forEach(e=>{let t=document.createElement("option");t.textContent=e.name,t.value=e.id,h.appendChild(t)})})(e(s).genres),S();let t=e(o)(h)[0];t.select.addEventListener("change",T),y.addEventListener("click",N)}),i("bf8lc"),i("7hKzD"),i("kvC6y"),i("cs2b8")}();
//# sourceMappingURL=library.51a93655.js.map
