function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},o=t.parcelRequire34ff;"use strict";null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},t.parcelRequire34ff=o),o("bUb57");var a=o("2eUFK"),i={};Object.defineProperty(i,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,o=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{!s&&r.return&&r.return()}finally{if(o)throw a}}return n}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")};i.default=function(e,t){var n=[],s=[];return function(){if(e&&e instanceof HTMLElement&&"SELECT"===e.tagName.toUpperCase())n.push(e);else if(e&&"string"==typeof e)for(var o=document.querySelectorAll(e),a=0,i=o.length;a<i;++a)o[a]instanceof HTMLElement&&"SELECT"===o[a].tagName.toUpperCase()&&n.push(o[a]);else if(e&&e.length)for(var c=0,d=e.length;c<d;++c)e[c]instanceof HTMLElement&&"SELECT"===e[c].tagName.toUpperCase()&&n.push(e[c]);for(var p=0,m=n.length;p<m;++p)s.push(function(e,t){var n="customSelect",s=!1,o="",a=void 0,i=void 0,r=void 0,c=void 0,d=void 0,u=void 0,p=void 0,m="";function f(e){r&&r.classList.remove(t.hasFocusClass),void 0!==e?((r=e).classList.add(t.hasFocusClass),s&&(e.offsetTop<e.offsetParent.scrollTop||e.offsetTop>e.offsetParent.scrollTop+e.offsetParent.clientHeight-e.clientHeight)&&e.dispatchEvent(new CustomEvent("custom-select:focus-outside-panel",{bubbles:!0}))):r=void 0}function v(e){c&&(c.classList.remove(t.isSelectedClass),c.removeAttribute("id"),i.removeAttribute("aria-activedescendant")),void 0!==e?(e.classList.add(t.isSelectedClass),e.setAttribute("id",n+"-"+o+"-selectedOption"),i.setAttribute("aria-activedescendant",n+"-"+o+"-selectedOption"),c=e,i.children[0].textContent=c.customSelectOriginalOption.text):(c=void 0,i.children[0].textContent=""),f(e)}function h(t){var n=[].indexOf.call(e.options,r.customSelectOriginalOption);e.options[n+t]&&f(e.options[n+t].customSelectCstOption)}function g(e){if(e||void 0===e){var o=document.querySelector("."+n+"."+t.isOpenClass);o&&(o.customSelect.open=!1),a.classList.add(t.isOpenClass),a.classList.add(t.isOpenClass),i.setAttribute("aria-expanded","true"),c&&(d.scrollTop=c.offsetTop),a.dispatchEvent(new CustomEvent("custom-select:open")),s=!0}else a.classList.remove(t.isOpenClass),i.setAttribute("aria-expanded","false"),s=!1,f(c),a.dispatchEvent(new CustomEvent("custom-select:close"));return s}function C(n){n.target===i||i.contains(n.target)?s?g(!1):g():n.target.classList&&n.target.classList.contains(t.optionClass)&&d.contains(n.target)?(v(n.target),c.customSelectOriginalOption.selected=!0,g(!1),e.dispatchEvent(new CustomEvent("change"))):n.target===e?i!==document.activeElement&&e!==document.activeElement&&i.focus():s&&!a.contains(n.target)&&g(!1)}function b(e){e.target.classList&&e.target.classList.contains(t.optionClass)&&f(e.target)}function E(t){if(s)switch(t.keyCode){case 13:case 32:v(r),c.customSelectOriginalOption.selected=!0,e.dispatchEvent(new CustomEvent("change")),g(!1);break;case 27:g(!1);break;case 38:h(-1);break;case 40:h(1);break;default:if(t.keyCode>=48&&t.keyCode<=90){p&&clearTimeout(p),p=setTimeout(function(){m=""},1500),m+=String.fromCharCode(t.keyCode);for(var n=0,o=e.options.length;n<o;n++)if(e.options[n].text.toUpperCase().substr(0,m.length)===m){f(e.options[n].customSelectCstOption);break}}}else(40===t.keyCode||38===t.keyCode||32===t.keyCode)&&g()}function O(){var t=e.selectedIndex;v(-1===t?void 0:e.options[t].customSelectCstOption)}function y(e){var t=e.currentTarget,n=e.target;n.offsetTop<t.scrollTop?t.scrollTop=n.offsetTop:t.scrollTop=n.offsetTop+n.clientHeight-t.clientHeight}function L(){document.addEventListener("click",C),d.addEventListener("mouseover",b),d.addEventListener("custom-select:focus-outside-panel",y),e.addEventListener("change",O),a.addEventListener("keydown",E)}function T(){document.removeEventListener("click",C),d.removeEventListener("mouseover",b),d.removeEventListener("custom-select:focus-outside-panel",y),e.removeEventListener("change",O),a.removeEventListener("keydown",E)}function S(e){var n=[];if(void 0===e.length)throw TypeError("Invalid Argument");for(var s=0,o=e.length;s<o;s++)if(e[s]instanceof HTMLElement&&"OPTGROUP"===e[s].tagName.toUpperCase()){var a=document.createElement("div");a.classList.add(t.optgroupClass),a.setAttribute("data-label",e[s].label),a.customSelectOriginalOptgroup=e[s],e[s].customSelectCstOptgroup=a;for(var i=S(e[s].children),r=0,l=i.length;r<l;r++)a.appendChild(i[r]);n.push(a)}else if(e[s]instanceof HTMLElement&&"OPTION"===e[s].tagName.toUpperCase()){var c=document.createElement("div");c.classList.add(t.optionClass),c.textContent=e[s].text,c.setAttribute("data-value",e[s].value),c.setAttribute("role","option"),c.customSelectOriginalOption=e[s],e[s].customSelectCstOption=c,e[s].selected&&v(c),n.push(c)}else throw TypeError("Invalid Argument");return n}function w(t,n,s){var o=void 0;if(void 0===s||s===e)o=d;else if(s instanceof HTMLElement&&"OPTGROUP"===s.tagName.toUpperCase()&&e.contains(s))o=s.customSelectCstOptgroup;else throw TypeError("Invalid Argument");var a=t instanceof HTMLElement?[t]:t;if(n)for(var i=0,r=a.length;i<r;i++)o===d?e.appendChild(a[i]):o.customSelectOriginalOptgroup.appendChild(a[i]);for(var l=S(a),c=0,u=l.length;c<u;c++)o.appendChild(l[c]);return a}(a=document.createElement("div")).classList.add(t.containerClass,n),(i=document.createElement("span")).className=t.openerClass,i.setAttribute("role","combobox"),i.setAttribute("aria-autocomplete","list"),i.setAttribute("aria-expanded","false"),i.innerHTML="<span>\n   "+(-1!==e.selectedIndex?e.options[e.selectedIndex].text:"")+"\n   </span>",d=document.createElement("div");for(var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",I=0;I<5;I++)o+=N.charAt(Math.floor(Math.random()*N.length));return d.id=n+"-"+o+"-panel",d.className=t.panelClass,d.setAttribute("role","listbox"),i.setAttribute("aria-owns",d.id),w(e.children,!1),a.appendChild(i),e.parentNode.replaceChild(a,e),a.appendChild(e),a.appendChild(d),document.querySelector('label[for="'+e.id+'"]')?u=document.querySelector('label[for="'+e.id+'"]'):"LABEL"===a.parentNode.tagName.toUpperCase()&&(u=a.parentNode),void 0!==u&&(u.setAttribute("id",n+"-"+o+"-label"),i.setAttribute("aria-labelledby",n+"-"+o+"-label")),e.disabled?a.classList.add(t.isDisabledClass):(i.setAttribute("tabindex","0"),e.setAttribute("tabindex","-1"),L()),a.customSelect={get pluginOptions(){return t},get open(){return s},set open(bool){g(bool)},get disabled(){return e.disabled},set disabled(bool){bool&&!e.disabled?(a.classList.add(t.isDisabledClass),e.disabled=!0,i.removeAttribute("tabindex"),a.dispatchEvent(new CustomEvent("custom-select:disabled")),T()):!bool&&e.disabled&&(a.classList.remove(t.isDisabledClass),e.disabled=!1,i.setAttribute("tabindex","0"),a.dispatchEvent(new CustomEvent("custom-select:enabled")),L())},get value(){return e.value},set value(val){var A;(A=e.querySelector("option[value='"+val+"']"))||(A=l(e.options,1)[0]),A.selected=!0,v(e.options[e.selectedIndex].customSelectCstOption)},append:function(e,t){return w(e,!0,t)},insertBefore:function(t,n){return function(t,n){var s=void 0;if(n instanceof HTMLElement&&"OPTION"===n.tagName.toUpperCase()&&e.contains(n))s=n.customSelectCstOption;else if(n instanceof HTMLElement&&"OPTGROUP"===n.tagName.toUpperCase()&&e.contains(n))s=n.customSelectCstOptgroup;else throw TypeError("Invalid Argument");var o=S(t.length?t:[t]);return s.parentNode.insertBefore(o[0],s),n.parentNode.insertBefore(t.length?t[0]:t,n)}(t,n)},remove:function(t){var n=void 0;if(t instanceof HTMLElement&&"OPTION"===t.tagName.toUpperCase()&&e.contains(t))n=t.customSelectCstOption;else if(t instanceof HTMLElement&&"OPTGROUP"===t.tagName.toUpperCase()&&e.contains(t))n=t.customSelectCstOptgroup;else throw TypeError("Invalid Argument");n.parentNode.removeChild(n);var s=t.parentNode.removeChild(t);return O(),s},empty:function(){for(var t=[];e.children.length;)d.removeChild(d.children[0]),t.push(e.removeChild(e.children[0]));return v(),t},destroy:function(){for(var t=0,n=e.options.length;t<n;t++)delete e.options[t].customSelectCstOption;for(var s=e.getElementsByTagName("optgroup"),o=0,i=s.length;o<i;o++)delete s.customSelectCstOptgroup;return T(),a.parentNode.replaceChild(e,a)},opener:i,select:e,panel:d,container:a},e.customSelect=a.customSelect,a.customSelect}(n[p],r({},u,t)));return s}()};try{var c=new window.CustomEvent("test");if(c.preventDefault(),!0!==c.defaultPrevented)throw Error("Could not prevent default")}catch(e){var d=function(e,t){var n,s;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s=n.preventDefault,n.preventDefault=function(){s.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};d.prototype=window.Event.prototype,window.CustomEvent=d}var u={containerClass:"custom-select-container",openerClass:"custom-select-opener",panelClass:"custom-select-panel",optionClass:"custom-select-option",optgroupClass:"custom-select-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"},p=o("hmX5O"),m=o("7Y9D8");function f(e=-1){let t=JSON.parse(localStorage.getItem("movies-library")??"[]");return e>0?t.slice(0,e):t}var v=o("76tat"),h=o("2shzp");const g={headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwYjE3NzU3ZjU2ZDg1NmM5YzE2MmE1OWEzZWZlMmY5MyIsInN1YiI6IjY0NzhkNWZjOWI2ZTQ3MDBkZThlOTBlZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BE22YVTai34Dh5C1jSxEZ2DzzjnxJfKFgEIpWS2JFcI",accept:"application/json"}},C=document.getElementById("genres-select"),b=document.getElementById("library-movie-list"),E=document.getElementById("lib-empty"),O=document.getElementById("lib-catalog"),y=document.getElementById("lib-load-more");let L=1;function T(e){b.insertAdjacentHTML("beforeend",e.map(p.default).join("")),(0,v.default)()}function S(e){let t=b.childNodes,n=e.target.value;"-1"===n?t.forEach(e=>e.classList.remove("is-hidden")):t.forEach(e=>{e.dataset.genres.split(",").includes(n)?e.classList.remove("is-hidden"):e.classList.add("is-hidden")})}async function w(){try{let e=f();if(0===e.length){E.classList.remove("is-hidden"),O.classList.add("is-hidden");return}let t=[];e.length<=9?(y.classList.add("is-hidden"),t=await Promise.all(e.map(N))):t=await Promise.all(e.slice(0,9).map(N)),T(t)}catch(e){A(e)}}async function N({id:e}){let t=await (0,h.default).get(`https://api.themoviedb.org/3/movie/${e}?language=en-US`,g),{data:{poster_path:n,title:s,vote_average:o,release_date:a,genres:i}}=t,r=i.map(({id:e})=>e);return{genre_ids:r,poster_path:n,title:s,vote_average:o,release_date:a,id:e}}async function I(){try{let e=f(),t=[],n=9*L;e.length-n<=9?(y.classList.add("is-hidden"),t=await Promise.all(e.slice(n).map(N))):(t=await Promise.all(e.slice(n,n+9).map(N)),L+=1),T(t)}catch(e){A(e)}}function A(e){console.error(e),(0,m.Notify).failure(e.message)}window.addEventListener("DOMContentLoaded",function(){(function(e){e.forEach(e=>{let t=document.createElement("option");t.textContent=e.name,t.value=e.id,C.appendChild(t)})})(e(a).genres),w();let t=e(i)(C)[0];t.select.addEventListener("change",S),y.addEventListener("click",I)}),o("1Hrz4"),o("epHO8"),o("gjiCh"),o("5kw5v");
//# sourceMappingURL=library.21cf8187.js.map
