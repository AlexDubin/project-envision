{"mappings":"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","sources":["<anon>","src/library.js","src/js/libraru_page/index.js","src/js/libraru_page/section_hero.js","src/js/libraru_page/section_library.js","src/js/markup/movieCardMarkup.js","src/js/api/libraryAPI.js"],"sourcesContent":["(function () {\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire34ff\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire34ff\"] = parcelRequire;\n}\nparcelRequire(\"i8Q71\");\n\n\n\nvar $XcJ0g = parcelRequire(\"XcJ0g\");\n\nvar $4DnXZ = parcelRequire(\"4DnXZ\");\n\n\nvar $XcJ0g = parcelRequire(\"XcJ0g\");\nvar // ---to do import\n$4b4baaa8e1f0e253$export$2e2bcd8739ae039 = ({ poster_path: poster_path , title: title , vote_average: vote_average , genre_ids: genre_ids , release_date: release_date , id: id  })=>{\n    const genresObject = {};\n    let genreNames = \"\";\n    (0, (/*@__PURE__*/$parcel$interopDefault($XcJ0g))).genres.forEach((genre)=>{\n        genresObject[genre.id] = genre.name;\n    });\n    if (genre_ids.length > 0) {\n        if (genre_ids.length === 1 || genre_ids.join(\", \").length <= 20) genreNames = genresObject[genre_ids[0]];\n        else genreNames = `${genresObject[genre_ids[0]]}, ${genresObject[genre_ids[1]]}`;\n    }\n    let imageMovie = \"\";\n    if (poster_path === null) // ---to do src\n    imageMovie = `<img  class='poster-movie-card' src='' alt='default poster'>`;\n    else imageMovie = `  <img\n  class='poster-movie-card'\n  src='https://image.tmdb.org/t/p/original${poster_path}'\n  srcset='https://image.tmdb.org/t/p/w342${poster_path} 342w,\n  https://image.tmdb.org/t/p/w500${poster_path} 500w,\n  https://image.tmdb.org/t/p/w780${poster_path} 780w,\n  https://image.tmdb.org/t/p/original${poster_path} 1500w'\n  sizes='(max-width:767px) 280px,\n  (max-width:1279px) 224px,\n  395px'\n  width='395'\n  height='574'\n  alt='${title} poster'\n  loading='lazy'\n>`;\n    return `<li class='item-movie-card' data-genres='${genre_ids}' data-id='${id}'>\n  <button class=\"button\" data-action=\"open-modal\">${imageMovie}\n  <div class='overlay-movie-card'></div>\n  <div class='info-movie-card'>\n    <h4 class='title-movie-card'>${title}</h4>\n    <div class='wrapper-movie-card'>\n      <div class='genre-year-movie-card'>\n        <p class='genre-movie-card span'>${genreNames}</p>\n        <span class='divider-movie-card'>&#124</span>\n        <p class='year-movie-card span'>${release_date.slice(0, 4)}</p>\n      </div>\n        <div class=\"rating\">\n          <div class=\"rating-body\">\n            <div class=\"rating-active\"></div>\n            <div class=\"rating-items\">\n              <input type=\"radio\" class=\"rating-item\" value=\"1\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"2\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"3\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"4\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"5\" name=\"rating\" />\n            </div>\n          </div>\n        <div class=\"rating-value\">${vote_average}</div>\n    </div>\n  </div>\n<button>\n</li>`;\n};\n\n\n\nvar $6JpON = parcelRequire(\"6JpON\");\nconst $7b7ec21f4027e328$var$STORAGE_KEY = \"movies-library\";\nconst $7b7ec21f4027e328$var$emptyLibEl = document.getElementById(\"lib-empty\");\nconst $7b7ec21f4027e328$var$libCatalogEl = document.getElementById(\"lib-catalog\");\nfunction $7b7ec21f4027e328$export$c6971b6839c168f9(movie) {\n    const movies = $7b7ec21f4027e328$export$70103e71d6f61b6c();\n    if (movie.id === undefined) throw new Error(\"No id\");\n    if (movies.some((savedMovie)=>savedMovie.id === movie.id)) throw new Error(\"Already in library\");\n    movies.push(movie);\n    $7b7ec21f4027e328$var$saveMovies(movies);\n}\nfunction $7b7ec21f4027e328$export$146f9300518dd625(id) {\n    const movieCardToRemove = document.querySelector(`[data-id=\"${id}\"]`);\n    movieCardToRemove?.remove();\n    let movies = $7b7ec21f4027e328$export$70103e71d6f61b6c();\n    movies = movies.filter((movie)=>movie.id !== id);\n    if (movies.length === 0) {\n        $7b7ec21f4027e328$var$emptyLibEl?.classList.remove(\"is-hidden\");\n        $7b7ec21f4027e328$var$libCatalogEl?.classList.add(\"is-hidden\");\n    }\n    $7b7ec21f4027e328$var$saveMovies(movies);\n}\nfunction $7b7ec21f4027e328$export$70103e71d6f61b6c(limit = -1) {\n    const movies = JSON.parse(localStorage.getItem($7b7ec21f4027e328$var$STORAGE_KEY) ?? \"[]\");\n    return limit > 0 ? movies.slice(0, limit) : movies;\n}\nfunction $7b7ec21f4027e328$var$saveMovies(movies) {\n    const moviesString = JSON.stringify(movies);\n    localStorage.setItem($7b7ec21f4027e328$var$STORAGE_KEY, moviesString);\n}\n\n\n\nvar $14Rx2 = parcelRequire(\"14Rx2\");\n\nvar $dIxxU = parcelRequire(\"dIxxU\");\nconst $fe6e9c4af98b7c03$var$BASE_URL = \"https://api.themoviedb.org/3\";\nconst $fe6e9c4af98b7c03$var$options = {\n    headers: {\n        Authorization: \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwYjE3NzU3ZjU2ZDg1NmM5YzE2MmE1OWEzZWZlMmY5MyIsInN1YiI6IjY0NzhkNWZjOWI2ZTQ3MDBkZThlOTBlZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BE22YVTai34Dh5C1jSxEZ2DzzjnxJfKFgEIpWS2JFcI\",\n        accept: \"application/json\"\n    }\n};\nconst $fe6e9c4af98b7c03$var$genresSelectEl = document.getElementById(\"genres-select\");\nconst $fe6e9c4af98b7c03$var$moviesListEl = document.getElementById(\"library-movie-list\");\nconst $fe6e9c4af98b7c03$var$emptyLibEl = document.getElementById(\"lib-empty\");\nconst $fe6e9c4af98b7c03$var$libCatalogEl = document.getElementById(\"lib-catalog\");\nconst $fe6e9c4af98b7c03$var$loadMoreBtnEl = document.getElementById(\"lib-load-more\");\nconst $fe6e9c4af98b7c03$var$PAGE_SIZE = 9;\nlet $fe6e9c4af98b7c03$var$page = 1;\nwindow.addEventListener(\"DOMContentLoaded\", $fe6e9c4af98b7c03$var$init);\nfunction $fe6e9c4af98b7c03$var$init() {\n    $fe6e9c4af98b7c03$var$populateGenresOptions((0, (/*@__PURE__*/$parcel$interopDefault($XcJ0g))).genres);\n    $fe6e9c4af98b7c03$var$initLibrary();\n    const genreSelect = (0, (/*@__PURE__*/$parcel$interopDefault($4DnXZ)))($fe6e9c4af98b7c03$var$genresSelectEl)[0];\n    genreSelect.select.addEventListener(\"change\", $fe6e9c4af98b7c03$var$filterMoviesByGenre);\n    $fe6e9c4af98b7c03$var$loadMoreBtnEl.addEventListener(\"click\", $fe6e9c4af98b7c03$var$onLoadMore);\n}\nfunction $fe6e9c4af98b7c03$var$populateGenresOptions(genres) {\n    genres.forEach((genre)=>{\n        const optionEl = document.createElement(\"option\");\n        optionEl.textContent = genre.name;\n        optionEl.value = genre.id;\n        $fe6e9c4af98b7c03$var$genresSelectEl.appendChild(optionEl);\n    });\n}\nfunction $fe6e9c4af98b7c03$var$appendMoviesToLibrary(movies) {\n    $fe6e9c4af98b7c03$var$moviesListEl.insertAdjacentHTML(\"beforeend\", movies.map((0, $4b4baaa8e1f0e253$export$2e2bcd8739ae039)).join(\"\"));\n    (0, $14Rx2.default)();\n}\nfunction $fe6e9c4af98b7c03$var$filterMoviesByGenre(evt) {\n    const movies = $fe6e9c4af98b7c03$var$moviesListEl.childNodes;\n    let filter = evt.target.value;\n    if (filter === \"-1\") movies.forEach((movie)=>movie.classList.remove(\"is-hidden\"));\n    else movies.forEach((movie)=>{\n        movie.dataset.genres.split(\",\").includes(filter) ? movie.classList.remove(\"is-hidden\") : movie.classList.add(\"is-hidden\");\n    });\n}\nasync function $fe6e9c4af98b7c03$var$initLibrary() {\n    try {\n        const movies = (0, $7b7ec21f4027e328$export$70103e71d6f61b6c)();\n        if (movies.length === 0) {\n            $fe6e9c4af98b7c03$var$emptyLibEl.classList.remove(\"is-hidden\");\n            $fe6e9c4af98b7c03$var$libCatalogEl.classList.add(\"is-hidden\");\n            return;\n        }\n        let resultMovies = [];\n        if (movies.length <= $fe6e9c4af98b7c03$var$PAGE_SIZE) {\n            $fe6e9c4af98b7c03$var$loadMoreBtnEl.classList.add(\"is-hidden\");\n            resultMovies = await Promise.all(movies.map($fe6e9c4af98b7c03$var$fetchMovie));\n        } else resultMovies = await Promise.all(movies.slice(0, $fe6e9c4af98b7c03$var$PAGE_SIZE).map($fe6e9c4af98b7c03$var$fetchMovie));\n        $fe6e9c4af98b7c03$var$appendMoviesToLibrary(resultMovies);\n    } catch (err) {\n        $fe6e9c4af98b7c03$var$onError(err);\n    }\n}\nasync function $fe6e9c4af98b7c03$var$fetchMovie({ id: id  }) {\n    const responce = await (0, $dIxxU.default).get(`${$fe6e9c4af98b7c03$var$BASE_URL}/movie/${id}?language=en-US`, $fe6e9c4af98b7c03$var$options);\n    const { data: { poster_path: poster_path , title: title , vote_average: vote_average , release_date: release_date , genres: genres  }  } = responce;\n    const genre_ids = genres.map(({ id: id  })=>id);\n    return {\n        genre_ids: genre_ids,\n        poster_path: poster_path,\n        title: title,\n        vote_average: vote_average,\n        release_date: release_date,\n        id: id\n    };\n}\nasync function $fe6e9c4af98b7c03$var$onLoadMore() {\n    try {\n        const movies = (0, $7b7ec21f4027e328$export$70103e71d6f61b6c)();\n        let resultMovies = [];\n        const moviesBefore = $fe6e9c4af98b7c03$var$PAGE_SIZE * $fe6e9c4af98b7c03$var$page;\n        if (movies.length - moviesBefore <= $fe6e9c4af98b7c03$var$PAGE_SIZE) {\n            $fe6e9c4af98b7c03$var$loadMoreBtnEl.classList.add(\"is-hidden\");\n            resultMovies = await Promise.all(movies.slice(moviesBefore).map($fe6e9c4af98b7c03$var$fetchMovie));\n        } else {\n            resultMovies = await Promise.all(movies.slice(moviesBefore, moviesBefore + $fe6e9c4af98b7c03$var$PAGE_SIZE).map($fe6e9c4af98b7c03$var$fetchMovie));\n            $fe6e9c4af98b7c03$var$page += 1;\n        }\n        $fe6e9c4af98b7c03$var$appendMoviesToLibrary(resultMovies);\n    } catch (err) {\n        $fe6e9c4af98b7c03$var$onError(err);\n    }\n}\nfunction $fe6e9c4af98b7c03$var$onError(error) {\n    console.error(error);\n    (0, $6JpON.Notify).failure(error.message);\n}\n\n\n\n\nparcelRequire(\"bf8lc\");\nparcelRequire(\"7hKzD\");\nparcelRequire(\"cs2b8\");\n\n})();\n//# sourceMappingURL=library.ebf04f18.js.map\n","import './js/header';\n\nimport './js/libraru_page';\n\nimport './js/modals';\n\nimport './js/footer';\n\nimport './js/go_to_top_btn';\n","import './section_hero';\nimport './section_library';\n","","import data from '../genres.json';\nimport customSelect from 'custom-select';\nimport 'custom-select/build/custom-select.css';\nimport movieCardMarkup from '../markup/movieCardMarkup';\nimport { Notify } from 'notiflix';\nimport { loadMovies } from '../api/libraryAPI';\nimport initRatings from '../utils/initRating';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst options = {\n  headers: {\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwYjE3NzU3ZjU2ZDg1NmM5YzE2MmE1OWEzZWZlMmY5MyIsInN1YiI6IjY0NzhkNWZjOWI2ZTQ3MDBkZThlOTBlZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BE22YVTai34Dh5C1jSxEZ2DzzjnxJfKFgEIpWS2JFcI',\n    accept: 'application/json',\n  },\n};\n\nconst genresSelectEl = document.getElementById('genres-select');\nconst moviesListEl = document.getElementById('library-movie-list');\nconst emptyLibEl = document.getElementById('lib-empty');\nconst libCatalogEl = document.getElementById('lib-catalog');\nconst loadMoreBtnEl = document.getElementById('lib-load-more');\n\nconst PAGE_SIZE = 9;\nlet page = 1;\n\nwindow.addEventListener('DOMContentLoaded', init);\n\nfunction init() {\n  populateGenresOptions(data.genres);\n  initLibrary();\n\n  const genreSelect = customSelect(genresSelectEl)[0];\n\n  genreSelect.select.addEventListener('change', filterMoviesByGenre);\n  loadMoreBtnEl.addEventListener('click', onLoadMore);\n}\n\nfunction populateGenresOptions(genres) {\n  genres.forEach(genre => {\n    const optionEl = document.createElement('option');\n\n    optionEl.textContent = genre.name;\n    optionEl.value = genre.id;\n\n    genresSelectEl.appendChild(optionEl);\n  });\n}\n\nfunction appendMoviesToLibrary(movies) {\n  moviesListEl.insertAdjacentHTML(\n    'beforeend',\n    movies.map(movieCardMarkup).join('')\n  );\n  initRatings();\n}\n\nfunction filterMoviesByGenre(evt) {\n  const movies = moviesListEl.childNodes;\n  let filter = evt.target.value;\n\n  if (filter === '-1') {\n    movies.forEach(movie => movie.classList.remove('is-hidden'));\n  } else {\n    movies.forEach(movie => {\n      movie.dataset.genres.split(',').includes(filter)\n        ? movie.classList.remove('is-hidden')\n        : movie.classList.add('is-hidden');\n    });\n  }\n}\n\nasync function initLibrary() {\n  try {\n    const movies = loadMovies();\n    if (movies.length === 0) {\n      emptyLibEl.classList.remove('is-hidden');\n      libCatalogEl.classList.add('is-hidden');\n      return;\n    }\n\n    let resultMovies = [];\n\n    if (movies.length <= PAGE_SIZE) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      resultMovies = await Promise.all(movies.map(fetchMovie));\n    } else {\n      resultMovies = await Promise.all(\n        movies.slice(0, PAGE_SIZE).map(fetchMovie)\n      );\n    }\n\n    appendMoviesToLibrary(resultMovies);\n  } catch (err) {\n    onError(err);\n  }\n}\n\nasync function fetchMovie({ id }) {\n  const responce = await axios.get(\n    `${BASE_URL}/movie/${id}?language=en-US`,\n    options\n  );\n  const {\n    data: { poster_path, title, vote_average, release_date, genres },\n  } = responce;\n  const genre_ids = genres.map(({ id }) => id);\n\n  return { genre_ids, poster_path, title, vote_average, release_date, id };\n}\n\nasync function onLoadMore() {\n  try {\n    const movies = loadMovies();\n    let resultMovies = [];\n    const moviesBefore = PAGE_SIZE * page;\n\n    if (movies.length - moviesBefore <= PAGE_SIZE) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      resultMovies = await Promise.all(\n        movies.slice(moviesBefore).map(fetchMovie)\n      );\n    } else {\n      resultMovies = await Promise.all(\n        movies.slice(moviesBefore, moviesBefore + PAGE_SIZE).map(fetchMovie)\n      );\n      page += 1;\n    }\n\n    appendMoviesToLibrary(resultMovies);\n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction onError(error) {\n  console.error(error);\n  Notify.failure(error.message);\n}\n","import genres from '../genres.json';\n// ---to do import\nexport default ({\n  poster_path,\n  title,\n  vote_average,\n  genre_ids,\n  release_date,\n  id,\n}) => {\n  const genresObject = {};\n  let genreNames = '';\n\n  genres.genres.forEach(genre => {\n    genresObject[genre.id] = genre.name;\n  });\n\n  if (genre_ids.length > 0) {\n    if (genre_ids.length === 1 || genre_ids.join(', ').length <= 20) {\n      genreNames = genresObject[genre_ids[0]];\n    } else {\n      genreNames = `${genresObject[genre_ids[0]]}, ${\n        genresObject[genre_ids[1]]\n      }`;\n    }\n  }\n  let imageMovie = '';\n  if (poster_path === null) {\n    // ---to do src\n    imageMovie = `<img  class='poster-movie-card' src='' alt='default poster'>`;\n  } else {\n    imageMovie = `  <img\n  class='poster-movie-card'\n  src='https://image.tmdb.org/t/p/original${poster_path}'\n  srcset='https://image.tmdb.org/t/p/w342${poster_path} 342w,\n  https://image.tmdb.org/t/p/w500${poster_path} 500w,\n  https://image.tmdb.org/t/p/w780${poster_path} 780w,\n  https://image.tmdb.org/t/p/original${poster_path} 1500w'\n  sizes='(max-width:767px) 280px,\n  (max-width:1279px) 224px,\n  395px'\n  width='395'\n  height='574'\n  alt='${title} poster'\n  loading='lazy'\n>`;\n  }\n\n  return `<li class='item-movie-card' data-genres='${genre_ids}' data-id='${id}'>\n  <button class=\"button\" data-action=\"open-modal\">${imageMovie}\n  <div class='overlay-movie-card'></div>\n  <div class='info-movie-card'>\n    <h4 class='title-movie-card'>${title}</h4>\n    <div class='wrapper-movie-card'>\n      <div class='genre-year-movie-card'>\n        <p class='genre-movie-card span'>${genreNames}</p>\n        <span class='divider-movie-card'>&#124</span>\n        <p class='year-movie-card span'>${release_date.slice(0, 4)}</p>\n      </div>\n        <div class=\"rating\">\n          <div class=\"rating-body\">\n            <div class=\"rating-active\"></div>\n            <div class=\"rating-items\">\n              <input type=\"radio\" class=\"rating-item\" value=\"1\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"2\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"3\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"4\" name=\"rating\" />\n              <input type=\"radio\" class=\"rating-item\" value=\"5\" name=\"rating\" />\n            </div>\n          </div>\n        <div class=\"rating-value\">${vote_average}</div>\n    </div>\n  </div>\n<button>\n</li>`;\n};\n","const STORAGE_KEY = 'movies-library';\nconst emptyLibEl = document.getElementById('lib-empty');\nconst libCatalogEl = document.getElementById('lib-catalog');\n\n/*\nВозможности:\n- Добавлять фильмы в библиотеку\n- Удалять фильмы из библиотеки\n- Загружать массив фильмов из библиотеки\n\nПри использовании надо обрабатывать возможные ошибки с try catch\nФормат сохранения максимально свободный - нужно лишь id\n*/\n\n// Максимально простая версия\n/**\n * Saves movie object to localStorage\n * @param {Object} movie - movie to save\n * @param {number} movie.id - id of movie (Required)\n * @throws Will throw an error if movie already in library\n * @throws {SyntaxError} Can throw this error cause JSON\n */\nexport function saveMovie(movie) {\n  const movies = loadMovies();\n\n  if (movie.id === undefined) throw new Error('No id');\n\n  if (movies.some(savedMovie => savedMovie.id === movie.id))\n    throw new Error('Already in library');\n\n  movies.push(movie);\n  saveMovies(movies);\n}\n\n/**\n * Removes movie from localStorage by id\n * @param {number} id - id of movie to delete\n * @throws {SyntaxError} Can throw this error cause JSON\n */\nexport function removeMovie(id) {\n  const movieCardToRemove = document.querySelector(`[data-id=\"${id}\"]`);\n  movieCardToRemove?.remove();\n\n  let movies = loadMovies();\n\n  movies = movies.filter(movie => movie.id !== id);\n\n  if (movies.length === 0) {\n    emptyLibEl?.classList.remove('is-hidden');\n    libCatalogEl?.classList.add('is-hidden');\n  }\n\n  saveMovies(movies);\n}\n\n/**\n * Loads movies from localStorage\n * @param {number} limit - Limit of returned movies\n * @returns Array of movies\n * @throws {SyntaxError} Can throw this error cause JSON\n */\nexport function loadMovies(limit = -1) {\n  const movies = JSON.parse(localStorage.getItem(STORAGE_KEY) ?? '[]');\n  return limit > 0 ? movies.slice(0, limit) : movies;\n}\n\nfunction saveMovies(movies) {\n  const moviesString = JSON.stringify(movies);\n  localStorage.setItem(STORAGE_KEY, moviesString);\n}\n"],"names":["$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$XcJ0g","$4DnXZ","$4b4baaa8e1f0e253$export$2e2bcd8739ae039","poster_path","title","vote_average","genre_ids","release_date","genresObject","genreNames","genres","forEach","genre","name","length","join","slice","$6JpON","$7b7ec21f4027e328$export$70103e71d6f61b6c","limit","movies","JSON","parse","localStorage","getItem","document","getElementById","$14Rx2","$dIxxU","$fe6e9c4af98b7c03$var$options","headers","Authorization","accept","$fe6e9c4af98b7c03$var$genresSelectEl","$fe6e9c4af98b7c03$var$moviesListEl","$fe6e9c4af98b7c03$var$emptyLibEl","$fe6e9c4af98b7c03$var$libCatalogEl","$fe6e9c4af98b7c03$var$loadMoreBtnEl","$fe6e9c4af98b7c03$var$page","$fe6e9c4af98b7c03$var$appendMoviesToLibrary","insertAdjacentHTML","map","$fe6e9c4af98b7c03$var$filterMoviesByGenre","evt","childNodes","filter","target","value","movie","classList","remove","dataset","split","includes","add","$fe6e9c4af98b7c03$var$initLibrary","resultMovies","Promise","all","$fe6e9c4af98b7c03$var$fetchMovie","$fe6e9c4af98b7c03$var$onError","responce","get","data","$fe6e9c4af98b7c03$var$onLoadMore","moviesBefore","$fe6e9c4af98b7c03$var$PAGE_SIZE","error","console","Notify","failure","message","addEventListener","$fe6e9c4af98b7c03$var$populateGenresOptions","optionEl","createElement","textContent","appendChild","genreSelect","select"],"version":3,"file":"library.ebf04f18.js.map"}